# 프로젝트 검토 및 최적화 제안서 (Project Review & Optimization Proposal)

본 문서는 GitHub 저장소 `Nothing5`의 현재 상태를 분석하고, 사용자의 요구사항인 **LLM API 비용 절감** 및 **컨텍스트 최적화**를 위한 구체적인 개선 방향을 제시합니다.

---

## 1. 현재 프로젝트 진단 (Current Status)

### ✅ 강점 (Strengths)
- **체계적인 로깅 시스템**: `logger.py`에 구현된 중앙화된 로깅 및 민감 정보 마스킹 기능은 상용 수준의 완성도를 갖추고 있습니다.
- **명확한 설계 문서**: 각 모듈별 `IMPLEMENTATION.md` 파일들이 존재하여 개발 방향성이 뚜렷합니다.
- **표준적인 프로젝트 구조**: `main.py`를 중심으로 한 파이프라인 설계가 객체지향적으로 잘 구성되어 있습니다.

### ⚠️ 즉시 수정 필요 사항 (Immediate Fixes)
- **ImportError 발생 가능성**: `main.py`는 `modules`, `config`, `ui` 패키지를 참조하지만, 현재 파일들이 루트 디렉토리에 흩어져 있습니다.
- **설정 파일 부재**: `config/config.py` 파일이 누락되어 있어 실행 시 필수 설정값(LOG_LEVEL 등)을 불러오지 못합니다.

---

## 2. 비용 및 컨텍스트 최적화 전략 (Cost & Context Optimization)

200KB 이상의 대용량 파일이나 다량의 파일을 처리할 때 API 크레딧을 보호하기 위한 핵심 전략입니다.

### 🛠 전략 1: 계층적 필터링 (Hierarchical Filtering)
모든 파일을 LLM에 보내지 않고, 단순 규칙으로 먼저 분류합니다.
- **확장자 기반**: `.jpg`, `.mp3` 등 명확한 파일은 즉시 이동.
- **키워드 매칭**: 파일명에 '영수증', 'invoice' 등이 포함되면 LLM 호출 없이 분류.

### 🛠 전략 2: 스마트 요약 추출 (Smart Summary Extraction)
파일 전체 내용을 보내는 대신, 의미 있는 부분만 추출하여 컨텍스트를 최소화합니다.
- **텍스트 파일**: 문서의 **앞부분 1000자 + 뒷부분 1000자**만 추출. (서론과 결론에 핵심 정보가 집중됨)
- **이미지 파일**: 고해상도 전체 이미지 대신 저해상도 썸네일 또는 특정 영역만 Vision API에 전달.

### 🛠 전략 3: 로컬 캐싱 및 규칙 학습
- 한 번 LLM이 분류한 패턴(예: `KB_Card_*.pdf` -> `금융/카드`)은 로컬 DB나 JSON 파일에 저장하여, 다음번에 유사한 파일이 들어오면 API 호출 없이 즉시 처리합니다.

---

## 3. 향후 개발 로드맵 (Development Roadmap)

| 단계 | 작업 내용 | 목표 |
| :--- | :--- | :--- |
| **1단계** | 폴더 구조 정리 및 `config.py` 작성 | 프로그램 실행 가능 상태 확보 |
| **2단계** | `Extractor`의 요약 기능 구현 | API 전송 데이터량 최소화 (비용 절감) |
| **3단계** | `Classifier`의 폴백(Fallback) 로직 강화 | API 오류나 크레딧 소진 시에도 기본 작동 보장 |
| **4단계** | GUI(Tkinter) 연결 및 테스트 | 사용자 편의성 증대 및 최종 검증 |

---

## 4. 2차 검수 시 참고 사항
진척이 되지 않거나 다음 단계 코드가 필요할 때, 특히 **"비용 아끼는 Extractor 실제 코드"**나 **"스마트 프롬프트 설계"**가 필요하시면 언제든 요청해 주세요.

**작성일:** 2025년 12월 27일
**작성자:** Manus AI Agent (1.6 Lite)
